!function(){"use strict";class t{constructor(){this.pathToNewsImages="assets/img/dist/news",this.wrapEl=document.querySelector(".news__wrap"),this.tabsWrapEl=document.querySelector(".news__tabs .swiper-wrapper"),this.numberOfCardsOnDesktopAndTablet=12,this.numberOfCardsOnMobile=8}addSwiperSlidesIntoPage(e){let t="";for(var s of e)t+=this.getTabMarkup(s);this.tabsWrapEl.insertAdjacentHTML("beforeend",t)}getTabMarkup(e){return`<div class="swiper-slide tab__slide">
			<button type="button" class="tab" data-tab="${e.id}">${e.name}</button>
		</div>`}getWindowWidth(t){let s=window.innerWidth,r=this.getNumberCardsNews(s);this.renderCategoryNews(r,t),window.addEventListener("resize",()=>{var e=window.innerWidth;e!=s&&(s=e,r=this.getNumberCardsNews(s),this.renderCategoryNews(r,t))})}getNumberCardsNews(e){return 576<e?this.numberOfCardsOnDesktopAndTablet:this.numberOfCardsOnMobile}renderCategoryNews(t,s){var e="Все проекты",r=this.getNumberCardsCategory(e,s);this.insertNewsIntoPage(t,e,s),this.addButtonMore(t,s,e,r),this.changeStyleBtn(document.querySelector(".tab")),document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",()=>{this.activateTab(t,e,e.dataset.tab,s)})})}activateTab(e,t,s,r){var a=this.getNumberCardsCategory(s,r);this.insertNewsIntoPage(e,s,r),this.addButtonMore(e,r,s,a),this.changeStyleBtn(t)}getNumberCardsCategory(e,t){let s=0;for(var r of t){if("Все проекты"==e)return s=t.length;r.townshipId!=e&&"Все проекты"!=r.townshipId||s++}return s}changeStyleBtn(e){document.querySelector(".tab.active")&&document.querySelector(".tab.active").classList.remove("active"),e.classList.add("active")}addButtonMore(e,s,r,t){if(e<t){this.wrapEl.insertAdjacentHTML("beforeend",'<div class="news__inner"><button type="button" class="button news__more">Показать еще</button></div>');e=document.querySelector(".news__more");let t="";e.addEventListener("click",()=>{for(let e=0;e<s.length;e++)"Все проекты"!=r&&s[e].townshipId!=r&&"Все проекты"!=s[e].townshipId||(t+=this.getNewsMarkup(s[e]));this.wrapEl.innerHTML="",this.wrapEl.insertAdjacentHTML("afterbegin",t)})}}insertNewsIntoPage(e,t,s){let r="",a=0,i=0;for(;a<e&&i<s.length;)"Все проекты"!=t&&s[i].townshipId!=t&&"Все проекты"!=s[i].townshipId||(r+=this.getNewsMarkup(s[i]),a++),i++;this.wrapEl.innerHTML="",this.wrapEl.insertAdjacentHTML("afterbegin",r),this.setSameHeightImage()}setSameHeightImage(){let t=document.querySelector(".news__item").clientWidth;document.querySelectorAll(".news__img").forEach(e=>{e.style.height=.75*t+"px"})}getNewsMarkup(e){var t=this.getDateNews(e);return`<a href="news.html#${e.id}" class="news__item">
			<div class="news__img">
				<img src="${this.pathToNewsImages}/${e.imageMiddle}" alt="${e.title}" width="424" height="316" class="news__photo">
			</div>
			<h2 class="h6 news__subtitle">${e.title}</h2>
			<p class="txt news__txt">${e.shortDescription}</p>
			<time datetime="${t}" class="news__date">${e.date}</time>
		</a>`}getDateNews(e){e=e.date.split(".");return`${e[2]}-${e[1]}-`+e[0]}}window.addEventListener("load",()=>{var e=new t;e.addSwiperSlidesIntoPage(townships),e.getWindowWidth(news)})}();